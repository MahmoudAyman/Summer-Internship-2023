<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <!-- CHANGE YOUR NAME -->
  <title>Lamis Helmy || Summer Internship</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="shortcut icon" href="images/favicon.ico"  type="image/x-icon">
  <link href='http://fonts.googleapis.com/css?family=Droid+Serif|Ubuntu' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="js/flexslider/flexslider.css">
  <link rel="stylesheet" href="css/colorblocks-style.css">
  <script src="js/libs/modernizr-2.6.2.min.js"></script>
<style>
 table, th, td {
  border: 1px solid black;
  border-collapse: collapse;}
</style>
</head>


<body id="home">
    <header class="wrapper clearfix">
		       
        <div id="banner">        
        	<div id="logo"><a href=""><img src="images/logo.png" alt="logo" height="30%" width="30%"></a></div> 
        </div>

        <nav id="topnav" role="navigation">
          <div class="menu-toggle">Menu</div>  
            <ul class="srt-menu" id="menu-main-navigation" style="padding-bottom: 10px;">
              <li class="current"><a href="index.html">Home</a></li>
              <li>
                <a href="assignment_1.html">Projects</a>
                <ul>
                  <li><a href="assignment_1.html">AVR Programmer</a></li>
                  <li><a href="assignment_2.html">Communication Protocols Project</a></li>
                  <!--<li><a href="assignment_1.html">Assignment</a></li>
                  <li><a href="assignment_1.html">Assignment</a></li>
                  <li><a href="assignment_1.html">Assignment</a></li>-->
                </ul>
              </li>
              <li><a href="final.html">Final Project</a></li>
            </ul>     
        </nav>
  
    </header><!-- end header -->
 
    <section id="page-header" class="clearfix">    
   
    <div class="wrapper">
      <h1>AVR Programmer</h1>
    </div>
    </section>

<div id="main" class="wrapper clearfix">    
    
	<section id="content">
    <!-- ADD YOUR THE STEPS OF YOUR DOCUMENTATION BELOW -->
    <!-- TO ADD IMAGES YOU WILL FIND IMG TAGS BETWEEN PARAGRAPHS -->
    <!-- ADD THE NAME OF YOUR FILE -->
                <h1>Block Diagram</h1>
                <p align="justify">There were three main blocks in the AVR programmer. The attiny84,
				the USB and the ISP. The programmer is a link between a PC and a microcontroller.
				It uses the USB to communicate with the PC and the ISP to communicate with the microcontroller</p>
                
                <img src="images/avr_programmer_bd.png">
                               
                <h1>Circuit Design</h1>
				<p align="justify">The circuit is simple and does not have many elements. Mainly, it has six elements. 
				The Attiny, USB type B, ISP 6-pin header, voltage clippers, bypass capacitors and 20 MHz resonator. 
				The schematic and layout were designed using EAGLE.</p>
				<p>● The external clock source is for more accuracy.<br>
				● The voltage clippers diodes are zeners that are used to regulate the voltage across the USB from 5 to 3.3 volts.<br>
				● The USB D- line is the one being pulled HIGH with a 1.5K resistor to identify the USB as a low speed device to the host.<br>
				● A 1µF capacitor to reduce power supply noise.<br>
				● A 0Ω resistor is connected between the reset of the ISP and the reset of the Attiny that should<br>
				be removed after programming the board to avoid reprogramming of the board</p>
                <img src="images/avr_programmer_circuit.png">

                <h1>PCB Layout:</h1>
                <p align="justify">The PCB Design was challenging where it had to be a small PCB but the used components were
				THT packages and took a lot of space on a single layer PCB. This meant that routing all the
				traces of the ATTiny84 with the ISP header pins and the USB pins was difficult but it was easier
				to put the components in the assembling process.</p>
				<p align="justify">Throughout the designing process a Design Rule Check was followed to output the layout
				according to standards as mentioned down below.</p>
				<p align="justify">
				● minimum trace clearance: 0.5mm<br>
				● minimum Pad clearance: 0.5mm<br>
				● minimum distance between components and board dimensions: 1.5mm<br>
				● minimum drill/hole: 0.8mm<br>
				● minimum trace width: 0.5mm</p>
				<p align="justify">Some components had special requirements for the routing process. The first component was the
				resonator which needs its two traces to be exactly equal in length to avoid latency due signal
				traveling which will affect the frequency and introduce error when used as an external clock to
				the ATTiny84. The second component was the USB that has D+ and D- differential pair pins that
				require to be routed next to each other and approximately the same length.</p>
				
                <img src="images/avr_programmer_layout.png"height="60%" width="70%">
                
                <h1> Fabrication and Assembly</h1>
				<p align="justify">In this project, we used the SRM-20. The PCB was created in three stages. First, the traces, using
				a V-bit of 1.15mm tip. Secondly, the drill holes, using a 0.8 milling bit. Third, is the contour,
				using a 1.6 milling bit. The PCB is about 5.3*5.7 cm. After creating the PCB, the components
				were soldiered on it. All of the components were THT.</p>
                
                <img src="">
                
                <h1>Firmware and Testing</h1>
                <p align="justify">To program the board, you need to use another programmer. In the project, the Arduino UNO
				was used following this <a href="https://makesomestuff.org/how-i-made-my-avr-programmer/">tutorial</a>. The following connections were made</p>
				
				<table style="width:100%">
				  <tr>
					<th>Arduino</th>
					<th>Board ISP</th>
				  </tr>
				  <tr>
					<td>D10</td>
					<td>Reset</td>
				  </tr>
				  <tr>
					<td>D11</td>
					<td>MOSI</td>
				  </tr>
				  <tr>
					<td>D12</td>
					<td>MISO</td>
				  </tr>
				  <tr>
					<td>D13</td>
					<td>SCK</td>
				  </tr>
				  <tr>
					<td>GND</td>
					<td>GND</td>
				  </tr>
				</table>
                <img src="">
                  
				<h1>Testing</h1>
                <p align="justify">The necessary software for each operating system can be found in this
				<a href="http://archive.fabacademy.org/archives/2016/doc/programming_FabISP.html">tutorial</a>. In this project we
				used Ubuntu on Oracle VM VirtualBox. After installing the necessary software, the makefile
				should be updated for the kind of programmer used in this case, arduino.
				<a href="http://academy.cba.mit.edu/classes/embedded_programming/firmware.zip">The FABISP firmware</a> 
				was used. Finally the board was programmed.</p>
				<h1>Challenges</h1>
				<p align="justify">Creating this board there were some obstacles and mistakes we had to fix. These were the mostimportant problems we faced.</p>
				<p align="justify">● The first layout design of the board was made without the DRC and as a result the traces
				on the actual PCB had a lot of copper around them which made them shorted together.</p>
				
				<img src="images\board_failed.jpeg"height="60%" width="70%">
				
				<p align="justify">● It's recommended to use linux rather than windows. This is because Windows had
				miscellaneous problems where it couldn't install AVRdude correctly and couldn't run the
				makefile due to errors.<br>
				● It is recommended to use a capacitor between the reset pin and the ground pin to avoid
				fritzing. Otherwise, you will not be able to set the fuses of your board.</p>

</section><!-- #end content area -->
      
      
    <!-- sidebar -->    
    <aside>
        <h2>See also: </h2>
            <nav id="secondary-navigation">
                    <ul>
                        <li class="current"><a href="assignment_1.html">AVR Programmer</a></li>
                        <li><a href="assignment_2.html">Communication Protocols Project</a></li>
                        <!--<li><a href="assignment_1.html">p</a></li>
                        <li><a href="assignment_1.html">Assignment</a></li>
                        <li><a href="assignment_1.html">Assignment</a></li>
                        <li><a href="assignment_1.html">Assignment</a></li>-->

                    </ul>
             </nav>
      </aside><!-- #end sidebar -->
    
    
    
</div><!-- #end div #main .wrapper -->





<!-- footer area -->    
<footer>
        <div id="colophon" class="wrapper clearfix">
          <h2 style="padding-left: 30px;">PROUDLY MADE BY MAKERS</h2>
            <img src="images/logo.png" height="30%" width="30%">
        </div>
        
    </footer><!-- #end footer area --> 


<!-- jQuery -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.9.0.min.js">\x3C/script>')</script>

<script defer src="js/flexslider/jquery.flexslider-min.js"></script>

<!-- fire ups - read this file!  -->   
<script src="js/main.js"></script>

</body>
</html>